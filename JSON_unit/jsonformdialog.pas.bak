unit JSONFormdialog;

{$MODE Delphi}

interface

uses
  SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, ComCtrls, Buttons, EditBtn;

type

  { TJSONForm2 }

  TJSONForm2 = class(TForm)
    array1_Check1: TCheckBox;
    array2_Check1: TCheckBox;
    array_max1: TComboBox;
    array_min1: TComboBox;
    BitBtn1: TBitBtn;
    Button18: TButton;
    Button19: TButton;
    Button20: TButton;
    Button21: TButton;
    Button22: TButton;
    Button23: TButton;
    Button24: TButton;
    Button25: TButton;
    Button26: TButton;
    Button27: TButton;
    addButton28: TButton;
    ColorButton3: TColorButton;
    ComboBox14: TComboBox;
    ComboBox15: TComboBox;
    ComboBox16: TComboBox;
    ComboBox17: TComboBox;
    ComboBox18: TComboBox;
    ComboBox19: TComboBox;
    ComboBox20: TComboBox;
    ComboBox21: TComboBox;
    DateEdit6: TDateEdit;
    DateEdit7: TDateEdit;
    DateEdit8: TDateEdit;
    exsample_Edit: TEdit;
    integer1_Check7: TCheckBox;
    integer1_Check8: TCheckBox;
    integer2_Check7: TCheckBox;
    integer2_Check8: TCheckBox;
    integer_max6: TComboBox;
    integer_max7: TComboBox;
    integer_min5: TComboBox;
    integer_min6: TComboBox;
    Label7: TLabel;
    Memo1: TMemo;
    Memo10: TMemo;
    Memo11: TMemo;
    Memo12: TMemo;
    Memo13: TMemo;
    object1_Check1: TCheckBox;
    object2_Check1: TCheckBox;
    object_max1: TComboBox;
    object_min1: TComboBox;
    PageControl5: TPageControl;
    Panel1: TPanel;
    Panel12: TPanel;
    Panel2: TPanel;
    Panel3: TPanel;
    P_description14: TEdit;
    P_description15: TEdit;
    P_description16: TEdit;
    P_description17: TEdit;
    P_description18: TEdit;
    P_description19: TEdit;
    P_description20: TEdit;
    P_description21: TEdit;
    P_discription_Check14: TCheckBox;
    P_discription_Check15: TCheckBox;
    P_discription_Check16: TCheckBox;
    P_discription_Check17: TCheckBox;
    P_discription_Check18: TCheckBox;
    P_discription_Check19: TCheckBox;
    P_discription_Check20: TCheckBox;
    P_discription_Check21: TCheckBox;
    P_ID14: TEdit;
    P_ID15: TEdit;
    P_ID16: TEdit;
    P_ID17: TEdit;
    P_ID18: TEdit;
    P_ID19: TEdit;
    P_ID20: TEdit;
    P_ID21: TEdit;
    P_ID_Check14: TCheckBox;
    P_ID_Check15: TCheckBox;
    P_ID_Check16: TCheckBox;
    P_ID_Check17: TCheckBox;
    P_ID_Check18: TCheckBox;
    P_ID_Check19: TCheckBox;
    P_ID_Check20: TCheckBox;
    P_ID_Check21: TCheckBox;
    P_Title14: TEdit;
    P_Title15: TEdit;
    P_Title16: TEdit;
    P_Title17: TEdit;
    P_Title18: TEdit;
    P_Title19: TEdit;
    P_Title20: TEdit;
    P_Title21: TEdit;
    P_Title_Check14: TCheckBox;
    P_Title_Check15: TCheckBox;
    P_Title_Check16: TCheckBox;
    P_Title_Check17: TCheckBox;
    P_Title_Check18: TCheckBox;
    P_Title_Check19: TCheckBox;
    P_Title_Check20: TCheckBox;
    P_Title_Check21: TCheckBox;
    string1_Check10: TCheckBox;
    string1_Check12: TCheckBox;
    string1_Check3: TCheckBox;
    string2_Check10: TCheckBox;
    string2_Check12: TCheckBox;
    string2_Check3: TCheckBox;
    string_max3: TComboBox;
    string_min3: TComboBox;
    TabSheet1: TTabSheet;
    TabSheet23: TTabSheet;
    TabSheet24: TTabSheet;
    TabSheet25: TTabSheet;
    TabSheet26: TTabSheet;
    TabSheet27: TTabSheet;
    TabSheet28: TTabSheet;
    TabSheet29: TTabSheet;
    TabSheet30: TTabSheet;
    TabSheet31: TTabSheet;
    TabSheet32: TTabSheet;
    TIme3: TComboBox;
    Time4: TComboBox;
    TIme_max3: TComboBox;
    Time_max4: TComboBox;
    TabSheet15: TTabSheet;
    TIme_min3: TComboBox;
    Time_min4: TComboBox;
    UpDown10: TUpDown;
    UpDown23: TUpDown;
    UpDown24: TUpDown;
    UpDown25: TUpDown;
    UpDown26: TUpDown;
    UpDown27: TUpDown;
    UpDown28: TUpDown;
    UpDown29: TUpDown;
    UpDown30: TUpDown;
    UpDown37: TUpDown;
    UpDown38: TUpDown;
    UpDown45: TUpDown;
    UpDown46: TUpDown;
    UpDown47: TUpDown;
    UpDown48: TUpDown;
    UpDown49: TUpDown;
    UpDown50: TUpDown;
    UpDown8: TUpDown;
    procedure addButton28Click(Sender: TObject);
    procedure BitBtn1Click(Sender: TObject);
    procedure Button10Click(Sender: TObject);
    procedure Button11Click(Sender: TObject);
    procedure Button12Click(Sender: TObject);
    procedure Button13Click(Sender: TObject);
    procedure Button14Click(Sender: TObject);
    procedure Button15Click(Sender: TObject);
    procedure Button16Click(Sender: TObject);
    procedure Button17Click(Sender: TObject);
    procedure Button18Click(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Button3Click(Sender: TObject);
    procedure Button5Click(Sender: TObject);
    procedure Button6Click(Sender: TObject);
    procedure Button7Click(Sender: TObject);
    procedure Button9Click(Sender: TObject);
    procedure FormClose(Sender: TObject; var CloseAction: TCloseAction);
    procedure FormCreate(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure PageControl5Change(Sender: TObject);
    procedure Panel3Click(Sender: TObject);
  private
    { Private 宣言 }
  public
    { Public 宣言 }
    comp_type:string;
    type_editbox:string;
    P_type:TStringlist;
    cpy_P:TStringList;
    item_ST,S_JSON2,S_JSON3,obj_item:TStringlist;
    obj_fir:boolean;
  end;

var
  JSONForm2: TJSONForm2;

implementation

uses JSONFormEdit, function_unit, Jsonparse;

{$R *.lfm}

procedure TJSONForm2.Button2Click(Sender: TObject);
var
  i:integer;
  s,t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox15.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title15.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title15.Text+'"' ;
  end;
  comp_type := combobox15.Text;

  t2 := ',"id":"'+P_ID15.Text+'"' ;
  t3 := ',"description": "' +  P_description15.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title15.Text );


//  t4 := '}' ;
//  t5 := '}' ;
  if not P_Title_Check15.Checked then
    t1 := '';
  if not P_ID_Check15.Checked then
    t2 := '';
  if not P_discription_Check15.Checked then
    t3 := '';

  s1 := ',"type": "integer"';
  s2 := ',"minimum":' + integer_min5.Text;
  s3 := ',"maximum":' + integer_max6.Text;
  if not integer1_Check7.Checked then begin
    s2 := '';
  end;
  if not integer2_Check7.Checked then begin
    s3 := '';
  end;

  //S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
  //S_JSON3.Add( 'required: true,' );
  //S_JSON3.Add( 'rangelength: [' + string_min3.Text + ',' + string_max3.Text + ']');
  //S_JSON3.Add( '}');

  //angula.js
  JSON_pars.st_i_short.add( integer_min5.Text );
  JSON_pars.st_i_long.add( integer_max6.Text );

  //P_type.Add('"string"');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  st.Add(s2);
  st.Add(s3);


//  P_type.Add(t4);
//  P_type.Add(t5);
  if memo11.Lines.Text <> '' then begin
    if memo11.Lines.Count > 0 then begin
      st.Add(',"enum":[');
      for i := 0 to memo11.Lines.Count -2 do begin
        st.Add( memo11.Lines[i] + ',' );
      end;
      st.Add(  memo11.Lines[memo11.Lines.Count -1]  );
      st.Add(']');
    end;
    st.Add(',"example":' + memo11.Lines[0] );
    st.Add(',"form":"' + comp_type + '"');
  end;

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;
  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );
end;

procedure TJSONForm2.Button3Click(Sender: TObject);
var
  i:integer;
  s,t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox16.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title16.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title16.Text+'"' ;
  end;
  comp_type := combobox16.Text;

  t2 := ',"id":"'+P_ID16.Text+'"' ;
  t3 := ',"description": "' +  P_description16.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title16.Text );


//  t4 := '}' ;
//  t5 := '}' ;
//if not P_Title_Check14.Checked then
//  t1 := '';
//if not P_ID_Check14.Checked then
//  t2 := '';
//if not P_discription_Check14.Checked then
//  t3 := '';

  s1 := ',"type": "number"';
  s2 := ',"minimum":' + integer_min6.Text;
  s3 := ',"maximum":' + integer_max7.Text;
if not integer1_Check8.Checked then begin
  s2 := '';
end;
if not integer2_Check8.Checked then begin
  s3 := '';
end;

//S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
//S_JSON3.Add( 'required: true,' );
//S_JSON3.Add( 'rangelength: [' + integer_min6.Text + ',' + inteegr_max7.Text + ']');
//S_JSON3.Add( '}');

  //angula.js
  JSON_pars.st_i_short.add( integer_min6.Text );
  JSON_pars.st_i_long.add( integer_max7.Text );

  //P_type.Add('"string"');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  st.Add(s2);
  st.Add(s3);


//  P_type.Add(t4);
//  P_type.Add(t5);
  if memo12.Lines.Text <> '' then begin
    if memo12.Lines.Count > 0 then begin
      st.Add(',"enum":[');
      for i := 0 to memo12.Lines.Count -2 do begin
        st.Add( memo12.Lines[i] + ',' );
      end;
      st.Add(  memo12.Lines[memo12.Lines.Count -1]  );
      st.Add(']');
    end;
    st.Add(',"example":' + memo12.Lines[0] );
    st.Add(',"form":"' + comp_type + '"');
  end;

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;
  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );
end;

procedure TJSONForm2.Button5Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button6Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button7Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button9Click(Sender: TObject);
var
  s1,s2,s3:string;
  i_obj:integer;
  f : TJsonForm2;
 begin
   //JSON_pars.S_PD.add( 'edits' );
   {
  s2 := InputBox('タイトルを', '入力', 'タイトル名');
  s1 := ',type : "object",';
  s2 := 'title: "' + S2 + '",';
  s3 := 'properties: {';
  obj_sw[obj_sw_count] := true;
  inc(obj_sw_count);

  P_type.Add(s1);
  P_type.Add(s2);
  P_type.Add(s3);
  }
  json_pars.obj_sw[json_pars.obj_sw_count] := true;
  i_obj := json_pars.obj_sw_count;
  inc(json_pars.obj_sw_count);

   s2 := InputBox('タイトル', 'タイトルを入力', '');



    s1 := '"object"';

    //P_type.Add(s1);
    //P_type.Add(s2);
    P_type.Add(',"type":' +s1);
    P_type.Add(
              ',"title": "'+ s2 +'"'
    );

   obj_item.Add( s2 + ' オブジェクト');
   P_type.Add(
              ',"properties": {'
    );
    s3 := p_type.Text;
    json_pars.json_s[json_pars.json_s_count] := s3;
    inc(json_pars.json_s_count);

    f := TJsonForm2.Create(functionunit);
    f.obj_fir:= true;
    f.ShowModal;


    P_type.Text:= P_type.Text +
    f.P_type.Text;
    P_type.Add('}');
    //showmessage(f.P_type.Text);


   obj_item.Text:= obj_item.Text + f.obj_item.Text;

    //functionunit.type_editbox.Text :=
    // functionunit.type_editbox.Text + char(13) + P_type.Text;
    f.Free;
   obj_item.Add( s2 + ' エンド');
  //obj_sw[i_obj] := false;
   //P_type.Clear;
end;

procedure TJSONForm2.FormClose(Sender: TObject; var CloseAction: TCloseAction);
var
  i:integer;
begin
  for i := 0 to json_pars.obj_sw_count -1 do begin
    if  json_pars.obj_sw[ i ] then begin
    //  functionunit.type_editbox.Add('}');
    end;
  end;
  if json_pars.obj_sw_count = 0 then begin
 //   functionunit.type_editbox.Add('}');
  end;
end;

procedure TJSONForm2.FormCreate(Sender: TObject);
begin
  cpy_p := TStringList.Create;
  cpy_P.Clear;
  P_type := TStringList.Create;
  P_type.Clear;
  S_JSON2 := TStringList.Create;
  S_JSON2.Clear;
  S_JSON3 := TStringList.Create;
  S_JSON3.Clear;
  item_ST := TStringList.Create;
  item_ST.Clear;

  obj_item := TStringList.Create;
  obj_item.Clear;

  obj_fir := false;
  {P_description.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description1.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description2.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description3.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description4.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description5.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description6.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description7.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description8.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description9.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description10.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description11.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description12.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];
  P_description13.Text:= JSON_pars.S_PD[JSON_pars.S_PD.Count -1];}
end;

procedure TJSONForm2.FormShow(Sender: TObject);
begin
  //showmessage(JSON_pars.S_PD);
  S_JSON2.Clear;
  P_type.Clear;
  cpy_P.Clear;

end;

procedure TJSONForm2.PageControl5Change(Sender: TObject);
begin

end;

procedure TJSONForm2.Panel3Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button1Click(Sender: TObject);
var
  i:integer;
  s,t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox14.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title14.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title14.Text+'"' ;
  end;
  comp_type := combobox14.Text;

  t2 := ',"id":"'+P_ID14.Text+'"' ;
  t3 := ',"description": "' +  P_description14.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title14.Text );


//  t4 := '}' ;
//  t5 := '}' ;
 // if not P_Title_Check14.Checked then
 //   t1 := '';
 // if not P_ID_Check14.Checked then
  //  t2 := '';
 // if not P_discription_Check14.Checked then
  //  t3 := '';

  s1 := ',"type": "string"';
  s2 := ',"minimum":' + string_min3.Text;
  s3 := ',"maximum":' + string_max3.Text;
  if not string2_Check3.Checked then begin
    s2 := '';
  end;
  if not string2_Check3.Checked then begin
    s3 := '';
  end;

  S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
  S_JSON3.Add( 'required: true,' );
  S_JSON3.Add( 'rangelength: [' + string_min3.Text + ',' + string_max3.Text + ']');
  S_JSON3.Add( '}');

  //angula.js
  JSON_pars.st_i_short.add( string_min3.Text );
  JSON_pars.st_i_long.add( string_max3.Text );

  //P_type.Add('"string"');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  st.Add(s2);
  st.Add(s3);


//  P_type.Add(t4);
//  P_type.Add(t5);
  if memo10.Lines.Text <> '' then begin
    if memo10.Lines.Count > 0 then begin
      st.Add(',"enum":[');
      for i := 0 to memo10.Lines.Count -2 do begin
        st.Add( '"' + memo10.Lines[i] + '",' );
      end;
      st.Add( '"' + memo10.Lines[memo10.Lines.Count -1] + '"' );
      st.Add(']');
    end;
    st.Add(',"example":"' + memo10.Lines[0] +  '"' );
    st.Add(',"form":"' + comp_type + '"');
  end;

  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );

  json_pars.json_s[json_pars.json_s_count] := st.Text;

  p_type.Add(st.Text);
  st.Free;

  inc(json_pars.json_s_count);

  if (not json_pars.obj_sw[ json_pars.obj_sw_count ]) or (json_pars.obj_sw_count = 0) then begin
    //functionunit.type_editbox.Text :=
    //  functionunit.type_editbox.Text + char(13) + P_type.Text+ char(13);
   // P_type.Clear;
  end;

end;

procedure TJSONForm2.BitBtn1Click(Sender: TObject);
begin
  {functionunit.editlist.Items[functionunit.TabpageNo].SynEdit1.Lines.Text:=
    functionunit.editlist.Items[functionunit.TabpageNo].SynEdit1.Lines.Text +
  }

end;

procedure TJSONForm2.addButton28Click(Sender: TObject);
var
  i:integer;
  s,t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox21.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title21.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title21.Text+'"' ;
  end;
  comp_type := combobox21.Text;

  t2 := ',"id":"'+P_ID21.Text+'"' ;
  t3 := ',"description": "' +  P_description21.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title21.Text );


//  t4 := '}' ;
//  t5 := '}' ;
 // if not P_Title_Check14.Checked then
 //   t1 := '';
 // if not P_ID_Check14.Checked then
  //  t2 := '';
 // if not P_discription_Check14.Checked then
  //  t3 := '';

  s1 := ',"type": "string"';


  S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
  S_JSON3.Add( 'required: true,' );
  S_JSON3.Add( 'rangelength: [' + string_min3.Text + ',' + string_max3.Text + ']');
  S_JSON3.Add( '}');

  //angula.js
  JSON_pars.st_i_short.add( string_min3.Text );
  JSON_pars.st_i_long.add( string_max3.Text );

  //P_type.Add('"string"');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  //st.Add(s2);
  //st.Add(s3);


//  P_type.Add(t4);
//  P_type.Add(t5);


  st.Add(',"example":"' + exsample_Edit.Text +  '"' );
  st.Add(',"form":"' + comp_type + '"');


  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );

  json_pars.json_s[json_pars.json_s_count] := st.Text;

  p_type.Add(st.Text);
  st.Free;

  inc(json_pars.json_s_count);

  if (not json_pars.obj_sw[ json_pars.obj_sw_count ]) or (json_pars.obj_sw_count = 0) then begin
    //functionunit.type_editbox.Text :=
    //  functionunit.type_editbox.Text + char(13) + P_type.Text+ char(13);
   // P_type.Clear;
  end;

end;

procedure TJSONForm2.Button10Click(Sender: TObject);
var
  s1,s2,s3:string;
  f : TJsonForm2;
  i_obj:integer;
 begin
   //JSON_pars.S_PD.add( 'edits' );
   {
  s2 := InputBox('タイトルを', '入力', 'タイトル名');
  s1 := ',type : "object",';
  s2 := 'title: "' + S2 + '",';
  s3 := 'properties: {';
  obj_sw[obj_sw_count] := true;
  inc(obj_sw_count);

  P_type.Add(s1);
  P_type.Add(s2);
  P_type.Add(s3);
  }
   json_pars.obj_sw[json_pars.obj_sw_count] := true;
   i_obj := json_pars.obj_sw_count;
   inc(json_pars.obj_sw_count);

    s2 := InputBox('タイトル', 'タイトルを入力', '');



     s1 := '"array"';

     //P_type.Add(s1);
     //P_type.Add(s2);
     P_type.Add(',"type":' +s1);
     P_type.Add(
               ',"title": "'+ s2 +'"'
     );
     f := TJsonForm2.Create(functionunit);
     f.obj_fir:= true;
     f.ShowModal;

     P_type.Add(
               ',"properties": {'
     );
     P_type.Text:= P_type.Text +
     f.P_type.Text;
     P_type.Add('}');

     json_pars.json_s[json_pars.json_s_count] := P_type.Text;
     inc(json_pars.json_s_count);
     //showmessage(f.P_type.Text);
     obj_item.Text:= f.obj_item.Text;
     //functionunit.type_editbox.Text :=
     // functionunit.type_editbox.Text + char(13) + P_type.Text;
     f.Free;
end;

procedure TJSONForm2.Button11Click(Sender: TObject);
var
  i:integer;
  t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox17.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title17.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title17.Text+'"' ;
  end;
  comp_type := combobox17.Text;

  t2 := ',"id":"'+P_ID17.Text+'"' ;
  t3 := ',"description": "' +  P_description17.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title17.Text );

//    t4 := '}' ;
//    t5 := '}' ;
//    if not P_Title_Check17.Checked then
//      t1 := '';
//    if not P_ID_Check17.Checked then
//      t2 := '';
//    if not P_discription_Check17.Checked then
//      t3 := '';

  s1 := ',"type": "boolean"';
  {s2 := ',"minLength":' + string_min2.Text;
  s3 := ',"maxLength":' + string_max2.Text;
  if not string1_Check2.Checked then begin
    s2 := '';
  end;
  if not string2_Check2.Checked then begin
    s3 := '';
  end;}

  //P_type.Add('boolean');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  //P_type.Add(s2);
  //P_type.Add(s3);

//  P_type.Add(t4);
//  P_type.Add(t5);

//S_JSON2.Add('"'+P_Title17.Text+'":[');
  //for i := 0 to memo7.Lines.Count -2 do begin
//  S_JSON2.Add( 'True,' );
//  S_JSON2.Add( 'False' );
  //end;
  //S_JSON2.Add( '"'+ memo7.Lines[memo7.Lines.Count -1] +'"' );
//S_JSON2.Add(']');
 // functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;



  {if comp_type = 'リスト' then begin
    st.Add(',"enum":[');
    st.Add( 'true,' );
    st.Add( 'false' );
    st.Add(']');
  end else if comp_type = 'ラジオボタン' then begin
    st.Add(',"enum":[');
    st.Add( '"' + edit5.Text + '",' );
    st.Add( '"' + edit6.Text + '"' );
    st.Add(']');
  end;}

  st.Add(',"form":"' + comp_type + '"');

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;

  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );
end;

procedure TJSONForm2.Button12Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button13Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button14Click(Sender: TObject);
begin

end;

procedure TJSONForm2.Button15Click(Sender: TObject);
var
  i:integer;
  t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox18.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title18.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title18.Text+'"' ;
  end;
  comp_type := combobox18.Text;

  t2 := ',"id":"'+P_ID18.Text+'"' ;
  t3 := ',"description": "' +  P_description18.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title18.Text );

//    t4 := '}' ;
//    t5 := '}' ;
//    if not P_Title_Check18.Checked then
//      t1 := '';
//    if not P_ID_Check18.Checked then
 //     t2 := '';
//    if not P_discription_Check18.Checked then
//      t3 := '';

  s1 := ',"type": "color"';
  {s2 := ',"minLength":' + string_min2.Text;
  s3 := ',"maxLength":' + string_max2.Text;
  if not string1_Check2.Checked then begin
    s2 := '';
  end;
  if not string2_Check2.Checked then begin
    s3 := '';
  end;}

//  P_type.Add('color');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  //P_type.Add(s2);
  //P_type.Add(s3);

//  P_type.Add(t4);
//  P_type.Add(t5);

//  S_JSON2.Add('"'+P_Title18.Text+'":[');
  //for i := 0 to memo7.Lines.Count -2 do begin
//    S_JSON2.Add( '"'+ colortostring(ColorButton3.Color) +'"' );
  //end;
  //S_JSON2.Add( '"'+ memo7.Lines[memo7.Lines.Count -1] +'"' );
//  S_JSON2.Add(']');
//  functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;

    P_type.Add(',"example":[');
  st.Add( '"'+ inttostr(ColorButton3.Color) +'"' );
  st.Add(']');

  st.Add(',"form":"' + comp_type + '"');

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;

  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );
end;

procedure TJSONForm2.Button16Click(Sender: TObject);
var
  i:integer;
  t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox19.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title19.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title19.Text+'"' ;
  end;
  comp_type := combobox19.Text;

  t2 := ',"id":"'+P_ID19.Text+'"' ;
  t3 := ',"description": "' +  P_description19.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title19.Text );


//    t4 := '}' ;
//    t5 := '}' ;
//    if not P_Title_Check19.Checked then
//      t1 := '';
//    if not P_ID_Check19.Checked then
//      t2 := '';
//    if not P_discription_Check19.Checked then
//      t3 := '';

  s1 := ',"type": "date"';
  s2 := ',"minimum":"' + StringReplace(dateedit6.Text, '/', '-', [rfReplaceAll]) +'"';
  s3 := ',"maximum":"' + StringReplace(dateedit7.Text, '/', '-', [rfReplaceAll]) +'"';
  if not string1_Check10.Checked then begin
    s2 := '';
  end;
  if not string2_Check10.Checked then begin
    s3 := '';
  end;

//S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
//S_JSON3.Add( 'required: true,' );
//S_JSON3.Add( 'rangelength: [' + StringReplace(dateedit8.Text, '/', '-', [rfReplaceAll]) + ']');
//S_JSON3.Add( '}');

//JSON_pars.i_short:= StringReplace(dateedit6.Text, '/', '-', [rfReplaceAll]);
//JSON_pars.i_long:= StringReplace(dateedit7.Text, '/', '-', [rfReplaceAll]);

  //P_type.Add('date');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  st.Add(s2);
  st.Add(s3);

//P_type.Add(t4);
//P_type.Add(t5);

//  S_JSON2.Add('"'+P_Title19.Text+'":[');
 // for i := 0 to memo7.Lines.Count -2 do begin
//    S_JSON2.Add( '"'+ StringReplace(dateedit8.Text, '/', '-', [rfReplaceAll]) +'"' );
 // end;
  //S_JSON2.Add( '"'+ memo7.Lines[memo7.Lines.Count -1] +'"' );
//  S_JSON2.Add(']');
//  functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  if dateedit8.Text <> '' then begin
    st.Add(',"example":[');
    st.Add( '"'+ StringReplace(dateedit8.Text, '/', '-', [rfReplaceAll]) +'"' );
    st.Add(']');
  end;
  st.Add(',"form":"' + comp_type + '"');

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;

  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );
end;

procedure TJSONForm2.Button17Click(Sender: TObject);
var
  i:integer;
  t1,t2,t3,t4,t5,s1,s2,s3:string;
  st:TStringList;
begin
  st:=TStringList.Create;
  st.Clear;
  comp_type := ComboBox20.Text;
  if obj_fir then begin
    t1 :='"title":"'+P_Title20.Text+'"' ;
    obj_fir := false;
  end else begin
    t1 :=',"title":"'+P_Title20.Text+'"' ;
  end;
  comp_type := combobox20.Text;
  t2 := ',"id":"'+P_ID20.Text+'"' ;
  t3 := ',"description": "' +  P_description20.Text +'"' ;
  JSON_pars.P_Name.Add( P_Title20.Text );


//    t4 := '}' ;
//    t5 := '}' ;
//    if not P_Title_Check20.Checked then
//      t1 := '';
//    if not P_ID_Check20.Checked then
//      t2 := '';
//    if not P_discription_Check20.Checked then
//      t3 := '';

  s1 := ',"type": "time"';
  s2 := ',"minimum":"' + Time_min4.Text + '-' + TIme_min3.Text+'"';
  s3 := ',"maximum":"' + TIme_max4.Text + '-' + TIme_max3.Text+'"';
  if not string1_Check12.Checked then begin
    s2 := '';
  end;
  if not string2_Check12.Checked then begin
    s3 := '';
  end;

//  S_JSON3.Add( '_' + JSON_pars.P_Name[0] + ': {' );
//  S_JSON3.Add( 'required: true,' );
//  S_JSON3.Add( 'rangelength: [' + Time_min4.Text + ',' + TIme_min3.Text + ']');
//  S_JSON3.Add( '}');

//  JSON_pars.i_short:= Time_min4.Text + ':' + TIme_min3.Text;
//  JSON_pars.i_long:= TIme_max4.Text + ':' + TIme_max3.Text;


  //P_type.Add('time');
  st.Add(t1);
  st.Add(t2);
  st.Add(t3);

  st.Add(s1);
  st.Add(s2);
  st.Add(s3);

//  P_type.Add(t4);
//  P_type.Add(t5);

//  S_JSON2.Add('"'+P_Title20.Text+'":[');
  {for i := 0 to memo7.Lines.Count -2 do begin
    S_JSON2.Add( '"'+ memo7.Lines[i] +'",' );
  end;}
//  S_JSON2.Add( '"'+ Time4.Text + ':' + TIme3.Text +'"' );
//  S_JSON2.Add(']');
//  functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  if (time4.Text <> '') or (time3.Text <> '') then begin
    st.Add(',"example":[');
    st.Add( '"'+ Time4.Text + '-' + TIme3.Text +'"' );
    st.Add(']');
  end;
  st.Add(',"form":"' + comp_type + '"');

  json_pars.json_s[json_pars.json_s_count] := st.Text;
  inc(json_pars.json_s_count);

  p_type.Add(st.Text);
  st.Free;

  //if json_pars.obj_sw[json_pars.obj_sw_count-1] = False then
    //functionunit.type_editbox.Text := functionunit.type_editbox.Text + char(13) + P_type.Text + char(13);
  //close;
  obj_item.Add( comp_type );

end;

procedure TJSONForm2.Button18Click(Sender: TObject);
begin

end;

end.
